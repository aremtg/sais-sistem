<div class="w-full bg-white p-6 rounded-lg shadow space-y-8">
  <div class="w-full bg-white p-6 rounded-xl shadow space-y-6">

    <!-- Header -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
      <div>
        <h1 class="text-2xl md:text-3xl font-semibold text-gray-800">
          MÃ³dulo de usuarios del sistema
        </h1>
        <p class="text-sm text-gray-500">
          Registro, control de usuarios en el sistema
        </p>
      </div>

      <button (click)="registrar()" class="inline-flex items-center justify-center gap-2 w-full md:w-auto
                 rounded-md bg-purple-700 px-5 py-2.5
                 text-sm font-medium text-white
                 hover:bg-purple-800
                 transition" matTooltip="Registrar nuevo usuarios"> <span>+</span>
        Registrar Usuarios
      </button>
    </div>

    <div class="w-full bg-gray-100 rounded-lg p-4 shadow-sm">
      <div class="flex flex-col gap-4 md:flex-row md:items-end">
        <!-- Buscador -->
        <div class="w-full md:w-1/2">
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Buscar
          </label>
          <div class="flex flex-col sm:flex-row gap-2">
            <div class="relative flex-1">
              <mat-icon class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">search</mat-icon>
              <input (keyup)="buscar()" [(ngModel)]="filtro" type="text" placeholder="Buscar usuario , email"
                class="w-full rounded-md border border-gray-300
                 pl-10 pr-3 py-2 text-sm
                 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-purple-600
                 transition" />
            </div>
          </div>
        </div>
        <!-- Roles -->
        <div class="w-full md:w-1/3">
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Roles
          </label>
          <select [(ngModel)]="filtroRol" (change)="aplicarroles()" class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm
               bg-white focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-purple-600">
            <option value="">Todos los Roles</option>
            <option *ngFor="let rol of role" [value]="rol"> {{rol}}</option>
          </select>
        </div>
        <div class="flex gap-2 w-full md:w-auto">
          <button type="reset" (click)="limpiarfiltros()" class="w-full md:w-auto rounded-md bg-gray-300 px-4 py-2 text-sm
               font-medium text-gray-700 hover:bg-gray-400 transition" matTooltip="Limpiar filtros">
            Limpiar Filtro
          </button>
        </div>

      </div>
    </div>
    <!-- Tabla -->
    <div class="overflow-x-auto rounded-xl border-2 border-gray-200 bg-white ">
      <table class="min-w-[700px] w-full border-collapse text-sm text-left " *ngIf="usuarios.length > 0">
        <thead class="bg-gray-100 text-gray-700">
          <tr>
            <th class="px-4 py-3 text-left font-semibold">#</th>
            <th class="px-4 py-3 text-left font-semibold">Nombre</th>
            <th class="px-4 py-3 text-left font-semibold">Image</th>
            <th class="px-4 py-3 text-left font-semibold">Usuario</th>
            <th class="px-4 py-3 text-left font-semibold">Email</th>
            <th class="px-4 py-3 text-left font-semibold">Fecha Creacion</th>
            <th class="px-4 py-3 text-left font-semibold">Rol</th>
            <th class="px-4 py-3 text-left font-semibold">Estado</th>
            <th class="px-4 py-3 text-left font-semibold">Acciones</th>
          </tr>
        </thead>

        <tbody class="divide-y divide-gray-200">
          <tr *ngFor="let usuario of usuarios ; let i = index" class="border-t hover:bg-gray-50 transition">
            <td class="px-4 py-3 whitespace-nowrap">{{i + 1}}</td>
            <td class="px-4 py-3">{{usuario.nombre}}</td>
            <td class="px-4 py-3">
              <img src="{{usuario.imagen}}" alt="{{usuario.nombre}}"
                class=" w-10 h-10 rounded-full object-cover border border-gray-400">
            </td>
            <td class="px-4 py-3">{{usuario.cedula}}</td>
            <td class="px-4 py-3">{{usuario.email}}</td>
            <td class="px-4 py-3">{{usuario.createdAt | date : 'dd-MM-yyyy HH:mm:ss'}}</td>
            <td class="px-4 py-3">{{usuario.role}}</td>
            <td class="px-4 py-3">{{usuario.isActive}}</td>
            <td class="px-4 py-3 text-center flex gap-4 ">
              <button matTooltip="Editar" class="text-yellow-700 hover:underline">
                Editar
              </button>
              <button matTooltip="Eliminar" class="text-red-700 hover:underline">
                Eliminar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <p *ngIf="usuarios.length === 0">No hay datos registrados de usuarios</p>
    </div>

  </div>
