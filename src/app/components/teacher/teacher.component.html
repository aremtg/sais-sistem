<div class="w-full bg-white p-6 rounded-lg shadow-md space-y-8">
  <div class="w-full bg-white p-6 rounded-xl shadow-md space-y-6">
    <!-- Header -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
      <div>
        <h1 class="text-2xl font-semibold text-gray-800">
          Módulo de Profesores
        </h1>
        <p class="text-sm text-gray-500">
          Registro, consulta y control académico de profesores.
        </p>
      </div>

      <button (click)="register()" class="inline-flex items-center gap-2 rounded-md bg-purple-700 px-4 py-2
             text-sm font-medium text-white hover:bg-purple-800 transition" matTooltip="Registrar Docente">
        + Registrar Docente
      </button>
    </div>

    <div class="w-full bg-gray-100 rounded-lg p-4 shadow-md">
      <div class="flex flex-col gap-4 md:flex-row md:items-end">
        <!-- Buscador -->
        <div class="w-full md:w-1/3">
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Buscar
          </label>
          <div class="flex flex-col sm:flex-row gap-2">
            <div class="relative flex-1">
              <mat-icon
                class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">search</mat-icon>
              <input (keyup)="buscarprofesores()" [(ngModel)]="filtros" type="text" placeholder="Buscar por cedula" class="w-full rounded-md border border-gray-300
               pl-10 pr-3 py-2 text-sm
               focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-purple-600
               transition" />
            </div>
          </div>
        </div>
        <!-- Profesor -->
         <div class="w-full md:w-1/4">
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Curso
          </label>
          <select [(ngModel)]="cursoseleccionado" (change)="buscarprofesores()"  class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm
                     bg-white focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-purple-600"
            matTooltip="seleciona un curso">
            <option disabled selected value="">Todos los Cursos</option>
            <option *ngFor="let curso of cursos" [value]="curso.id">
              {{curso.codigo}} - {{curso.nombreCurso}}
            </option>
          </select>
        </div>

        <!-- Botones -->
        <div class="flex gap-2 w-full md:w-auto">
          <button (click)="filtrosLimpiar()" type="reset" class="w-full md:w-auto rounded-md bg-gray-300 px-4 py-2 text-sm
               font-medium text-gray-700 hover:bg-gray-400 transition" matTooltip="Limpiar filtros">
            Limpiar Filtros
          </button>
        </div>

      </div>
    </div>

    <!-- Tabla -->
    <div class="overflow-x-auto rounded-xl border-2 border-gray-200">
      <table class="w-full text-sm text-left">
        <thead class="bg-gray-100 text-gray-700">
          <tr>
            <th class="p-3">N</th>
            <th class="p-3">Cédula</th>
            <th class="p-3">Nombre</th>
            <th class="p-3">Profesión</th>
            <th class="p-3">Rama</th>
            <th class="p-3">Jornada</th>
            <th class="p-3">Teléfono</th>
            <th class="p-3">Email</th>
            <th class="p-3">Cursos</th>
            <th class="p-3">Alumnos</th>
            <th class="p-3 text-center">Acciones</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let profe of profesor ; let i = index" class="border-t hover:bg-gray-50">
            <td class="p-3">{{i + 1}}</td>
            <td class="p-3">{{profe.cedula}}</td>
            <td class="p-3">{{profe.nombre}}</td>
            <td class="p-3">{{profe.profesion}}</td>
            <td class="p-3">{{profe.rama}}</td>
            <td class="p-3">{{profe.jornada}}</td>
            <td class="p-3">{{profe.telefono}}</td>
            <td class="p-3">{{profe.email}}</td>
            <td class="p-3 flex items-center justify-between m-2" *ngIf="profe.cursos && profe.cursos.length > 0 ; else sinCursos">
              {{ profe.cursos.length }}
              <button class="hover:text-purple-600" matTooltip="Ver cursos" (click)="vercurso(profe)">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#8C1AF6">
                  <path
                    d="M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z" />
                </svg>
              </button>
            </td>
            <ng-template #sinCursos>
              <td class="p-3 text-center text-red-500">Sin cursos</td>
            </ng-template>
            <td class="p-3" *ngIf="profe.students && profe.students.length > 0 ; else sinAlumnos">
              {{ profe.students.length }}
              <button class="hover:text-purple-600" matTooltip="Ver cursos" (click)="vercurso(profe)">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#8C1AF6">
                  <path
                    d="M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z" />
                </svg>
              </button>
            </td>
            <ng-template #sinAlumnos>
              <td class="p-3 text-center text-red-500">Sin alumnos</td>
            </ng-template>

            <!-- <td class="p-3">Curso 1</td> -->
            <!-- <td class="p-3">Ana Gómez</td> -->

             <td class="p-3 flex justify-center gap-4 ">
              <button  matTooltip="Ver" class="hover:text-purple-600">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                  fill="#8C1AF6">
                  <path
                    d="M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z" />
                </svg>
              </button>
              <button matTooltip="Editar">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                  fill="#EAC452">
                  <path
                    d="M160-400v-80h280v80H160Zm0-160v-80h440v80H160Zm0-160v-80h440v80H160Zm360 560v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q8 9 12.5 20t4.5 22q0 11-4 22.5T863-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
                </svg>
              </button>
              <button matTooltip="Eliminar" >
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                  fill="#EA3323">
                  <path
                    d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z" />
                </svg>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <div *ngIf="profesor.length === 0" class="p-4 text-center text-gray-500">
        No hay profesores registrados. "{{filtros}}"
      </div>
      <div *ngIf="total > 0" class="border-t bg-gray-100 px-4 py-4">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
          <!-- Información -->
          <div class="text-sm text-gray-600 text-center sm:text-left">Mostrando<span class="font-medium"> {{ startItem
              }} </span>-<span class="font-medium"> {{ endItem }} </span>
            de<span class="font-medium"> {{ total }} </span>registros
          </div>
          <div class="flex flex-col sm:flex-row items-center gap-3 w-full sm:w-auto">
            <div class="flex items-center gap-2">
              <label class="text-sm">Registros:</label>
              <select [value]="limit" (change)="cambiarLimit($event)" class="border px-2 py-1 rounded text-sm w-20">
                <option value="2">2</option>
                <option value="5">5</option>
                <option value="10">10</option>
              </select>
            </div>
            <div class="flex items-center gap-2">
              <button (click)="irAPagina(page - 1)" [disabled]="page === 1"
                class="px-3 py-1 border rounded text-sm disabled:opacity-40 hover:bg-gray-100">
                Anterior
              </button>
              <span class="text-sm font-medium whitespace-nowrap">{{ page }} - {{ totalPages }}</span>
              <button (click)="irAPagina(page + 1)" [disabled]="page === totalPages"
                class="px-3 py-1 border rounded text-sm disabled:opacity-40 hover:bg-gray-100">
                Siguiente
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
